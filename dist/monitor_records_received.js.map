{"version":3,"sources":["../src/monitor_records_received.ts"],"names":[],"mappings":";AAAA,MAAM,CAAC,OAAO,GAAG;IAEf,gFAAgF;IAChF,+CAA+C;IAE/C,OAAO,EAAG,UAAS,MAAM,EAAG,SAAS,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK;QAE5D,0CAA0C;QAC1C,IAAI,SAAS,GAAG,EAAE,CAAC;QACnB,IAAI,QAAQ,GAAG,gCAAgC,CAAA;QAE/C,OAAO,CAAC,GAAG,CAAC,+DAA+D,CAAC,CAAA;QAC5E,SAAS,IAAI,mBAAmB,GAAI,QAAQ,GAAG,8CAA8C,CAAA;QAE7F,6DAA6D;QAC7D,IAAI,iBAAiB,GAAG,IAAI,IAAI,EAAE,CAAC;QACnC,IAAI,WAAW,GAAG,iBAAiB,CAAC,MAAM,EAAE,CAAA;QAE5C,+CAA+C;QAC/C,EAAE,CAAC,CAAC,WAAW,GAAG,CAAC,IAAI,WAAW,GAAG,CAAE,CAAC,CAAA,CAAC;YAEvC,OAAO,CAAC,GAAG,CAAC,0CAA0C,CAAC,CAAA;YACvD,SAAS,IAAI,2CAA2C,CAAA;YAGxD,MAAM;iBACL,KAAK,CAAC,gFAAgF,GAAG,SAAS,GAAG,WAAW,GAAG,OAAO,GAAG,IAAI,CAAC;iBAClI,EAAE,CAAC,KAAK,EAAE,UAAS,MAAM;gBACxB,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAA,CAAC;oBACvB,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,GAAG,gCAAgC,CAAC,CAAA;oBAC/D,SAAS,IAAI,MAAM,CAAC,QAAQ,GAAG,gCAAgC,CAAA;oBAC/D,OAAO,CAAC,SAAS,CAAC,CAAA;gBACpB,CAAC;gBACD,IAAI,CAAA,CAAC;oBACH,OAAO,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAA;oBAChD,SAAS,IAAI,mCAAmC,CAAA;oBAChD,KAAK,CAAC,SAAS,CAAC,CAAC;gBACnB,CAAC;YACH,CAAC,CAAC,CAAA;QACJ,CAAC;QAED,IAAI,CAAC,CAAC;YACJ,OAAO,CAAC,GAAG,CAAC,sCAAsC,CAAC,CAAA;YACnD,SAAS,IAAI,0CAA0C,CAAA;YACvD,KAAK,CAAC,SAAS,CAAC,CAAC;QACnB,CAAC;IACH,CAAC;CACF,CAAA","file":"monitor_records_received.js","sourcesContent":["module.exports = {\n\n  //this test checks firstly to see if it is a weekday. If it is it then proceeds,\n  //to check if any monitor records were received\n\n  runTest : function(client,  startdate, enddate, success, error){\n\n    //initialize logging for every console.log\n    var LogString = \"\";\n    var dashline = \"--------------------------\\n\\n\"\n\n    console.log(\"Monitor Tests: \\n\\nTest 1: Monitor Day records were received:\")\n    LogString += \"Monitor Tests: \\n\"  + dashline + \"Test 1: Monitor Day records were received:\\n\"\n\n    //get today's date and then get the current day from the date\n    var current_timestamp = new Date();\n    var current_day = current_timestamp.getDay()\n\n    //if today is a weekday run tests else callback\n    if (current_day > 0 && current_day < 6 ){\n\n      console.log(\"Day is weekday - checking for records...\")\n      LogString += \"Day is weekday- checking for records...\\n\"\n\n\n      client\n      .query('SELECT * FROM salesforce.ablb_monitor_day__c WHERE lastmodifieddate BETWEEN \\'' + startdate + '\\' AND \\'' + enddate + '\\'')\n      .on('end', function(result) {\n        if (result.rowCount > 0){\n          console.log(result.rowCount + \" Records Received - PASSED\\r\\n\")\n          LogString += result.rowCount + \" Records Received - PASSED\\n\\n\"\n          success(LogString)\n        }\n        else{\n          console.log(\"No Records Received - FAILED \\r\\n\")\n          LogString += \"No Records Received - FAILED \\n\\n\"\n          error(LogString);\n        }\n      })\n    }\n\n    else {\n      console.log(\"Not a Weekday Monitor - Test Not Run\")\n      LogString += \"Not a Weekday Monitor - Test Not Run\\n\\n\"\n      error(LogString);\n    }\n  }\n}\n"]}